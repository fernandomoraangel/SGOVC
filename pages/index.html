<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesti√≥n de OVC</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../css/main.css">
    <!-- Cargar D3.js para la visualizaci√≥n del rizoma y biblioteca D3.js para visualizaci√≥n de grafos -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <!-- navigation.js se mueve al final del body -->
    <script src="../js/ovcStorage.js" defer></script>
    <script src="../js/ovcDisplay.js" defer></script>
    <script src="../js/ovcForm.js" defer></script>
    <script src="../js/navigation.js" defer></script>
    <script src="../js/utils.js" defer></script>
    <!-- Scripts espec√≠ficos para Rizoma y Kanban -->
    <script src="../js/rizoma-simple.js"></script>
    <script src="../js/kanban-simple.js"></script>
    <script src="../js/inlineShowSection.js" defer></script>
    <!-- SortableJS for drag-and-drop subtasks -->
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
    <!-- Duplicate SortableJS removed -->
    <script src="https://cdn.jsdelivr.net/npm/fuse.js/dist/fuse.min.js"></script>
</head>

<body class="bg-gray-100 font-sans">
    <div class="flex h-screen bg-gray-100">
        <aside class="w-64 bg-white shadow-md flex flex-col fixed h-full z-10">
            <div class="logo-placeholder text-gray-700">
                <img src="../images/logocd.png" alt="Creaci√≥n Digital" style="max-width: 150px; height: auto;">
            </div>
            <nav class="flex-grow">
                <ul>
                    <li>
                        <a href="#" class="sidebar-link flex items-center px-6 py-3 text-gray-700 hover:bg-gray-200"
                            data-section="crear">
                            <span>‚ûï</span> <span>Crear OVC</span>
                        </a>
                    </li>
                    <li>
                        <a href="#"
                            class="sidebar-link flex items-center px-6 py-3 text-gray-700 hover:bg-gray-200 active"
                            data-section="listar">
                            <span>üìã</span> <span>Listar OVC</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="sidebar-link flex items-center px-6 py-3 text-gray-700 hover:bg-gray-200"
                            data-section="rizoma" id="rizoma-link">
                            <span>üå±</span> <span>Ver Rizoma</span>
                        </a>
                    </li>

                    <li>
                        <a href="#" class="sidebar-link flex items-center px-6 py-3 text-gray-700 hover:bg-gray-200"
                            id="rubricas-toggle">
                            <span>üìä</span> <span>R√∫bricas</span>
                            <span class="submenu-toggle-icon">‚ñ∂Ô∏è</span>
                        </a>
                        <ul class="submenu" id="rubricas-submenu">
                            <li>
                                <a href="#" onclick="event.preventDefault(); loadPageInContentArea('disenar_rubrica.html', this);"
                                    class="sidebar-link submenu-link flex items-center px-6 py-2 text-gray-600 hover:bg-gray-200">
                                    <span>‚úèÔ∏è</span> <span>Dise√±ar R√∫brica</span>
                                </a>
                            </li>
                            <li>
                                <a href="#" onclick="event.preventDefault(); loadPageInContentArea('resumen_rubricas.html', this);"
                                    class="sidebar-link submenu-link flex items-center px-6 py-2 text-gray-600 hover:bg-gray-200">
                                    <span>üìë</span> <span>Resumen R√∫bricas</span>
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </nav>
            <div class="p-4 mt-auto flex justify-center border-t border-gray-200">
                <img src="../images/logoudea.png" alt="Logo Ude@" class="udea-logo">
            </div>
        </aside>

        <div class="flex-1 flex flex-col ml-64 min-h-0"> <!-- Added min-h-0 -->
            <header class="bg-gray-800 shadow-md p-4 flex justify-between items-center">
                <div class="text-white text-xl font-semibold" id="section-title">
                    <span>üìã</span> Mis objetos virtuales creativos
                </div>
                <div class="flex items-center space-x-4">
                    <span class="text-white">üë§ Fernando Mora Angel</span>
                    <div
                        class="w-10 h-10 rounded-full bg-pink-500 flex items-center justify-center text-white font-bold">
                        FM
                    </div>
                    <button class="text-gray-300 hover:text-white text-xl" title="Salir">
                        <span>üö™</span> </button>
                </div>
            </header>

            <main class="flex-1 p-6 lg:p-8"> <!-- Removed overflow-y-auto -->
                <div id="content-area" class="flex flex-col flex-1 min-h-0 h-full"> <!-- Added h-full -->
                    <!-- La secciu00f3n para crear OVC se encuentra mu00e1s abajo -->

                    <!-- Secciu00f3n para listar OVCs -->
                    <div id="listar-section" class="space-y-6">
                        <div class="flex justify-between items-center mb-6">

                            <div class="flex items-center space-x-4">
                                <button id="go-to-create-btn"
                                    class="btn-create-ovc flex items-center px-4 py-2 rounded-lg shadow hover:shadow-md transition duration-300">
                                    <span>‚ûï</span><span>Crear OVC</span> </button>
                                <div class="relative">
                                    <span class="search-icon">üîç</span> <input type="text" placeholder="Buscar..."
                                        id="search-input"
                                        class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent">
                                </div>
                                <button id="advanced-search-trigger" title="B√∫squeda Avanzada" class="ml-2 p-2 border border-gray-300 rounded-lg hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-pink-500">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3zm3.707 4.707A1 1 0 017 7h6a1 1 0 01.707.293l-2.828 2.828A1 1 0 0110 10.586v3.828l-1-1V10.586a1 1 0 01-.293-.707L6.707 7.707z" clip-rule="evenodd" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow">
                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-200">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th scope="col"
                                                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                T√≠tulo (Recurso)</th>
                                            <th scope="col"
                                                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                Autor Principal</th>
                                            <th scope="col"
                                                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                Asignaturas</th>
                                            <th scope="col"
                                                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                A√±o-Semestre</th>
                                            <th scope="col"
                                                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                Etiquetas</th>
                                            <th scope="col" class="relative px-6 py-3">
                                                <span class="sr-only">Acciones</span>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody id="ovc-table-body" class="bg-white divide-y divide-gray-200">
                                    </tbody>
                                </table>
                            </div>
                            <div
                                class="flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6 mt-4 rounded-b-lg">
                                <div class="hidden sm:flex sm:flex-1 sm:items-center sm:justify-between">
                                    <div>
                                        <p class="text-sm text-gray-700">
                                            Mostrando <span id="pagination-start">0</span> a <span
                                                id="pagination-end">0</span> de <span id="pagination-total">0</span>
                                            resultados
                                        </p>
                                    </div>
                                    <div>
                                        <nav class="isolate inline-flex -space-x-px rounded-md shadow-sm"
                                            aria-label="Pagination">
                                            <a href="#"
                                                class="relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0">
                                                <span>‚è™</span> </a>
                                            <a href="#"
                                                class="relative inline-flex items-center px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0">
                                                <span>‚¨ÖÔ∏è</span> </a>
                                            <a href="#"
                                                class="relative inline-flex items-center px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0">
                                                <span>‚û°Ô∏è</span> </a>
                                            <a href="#"
                                                class="relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0">
                                                <span>‚è©</span> </a>
                                        </nav>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Secci√≥n para visualizar el rizoma eliminada para evitar duplicidad de IDs -->

                    <!-- Secci√≥n para el tablero Kanban -->
                    <div id="kanban-section" class="hidden flex-1 flex flex-col h-full">
                        <iframe id="kanban-iframe" src="kanban.html" class="w-full h-full border-0" style="min-height: 600px;">
                            Tu navegador no soporta iframes. Por favor, actualiza a un navegador m√°s reciente.
                        </iframe>
                    </div>

                    <!-- Eliminado div duplicado con id="rizoma-section" que estaba aqu√≠ -->
                    <div id="crear-section" class="hidden space-y-8">
                        <!-- Eliminado: T√≠tulo duplicado -->

                        <form id="crear-ovc-form" class="space-y-10 bg-white p-8 rounded-lg shadow-lg">
                            <input type="hidden" id="edit-ovc-id" name="edit-ovc-id">
                            <div class="border-b border-gray-200 pb-6">
                                <h2 class="text-xl font-semibold text-gray-700 mb-4"><span>‚ÑπÔ∏è</span> Informaci√≥n B√°sica
                                </h2>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label for="ovc-imagen" class="block text-sm font-medium text-gray-700 mb-1">
                                            <span>üñºÔ∏è</span> Imagen de Portada </label>
                                        <input type="file" id="ovc-imagen" name="ovc-imagen" accept="image/*"
                                            class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-pink-50 file:text-pink-700 hover:file:bg-pink-100 custom-file-input">
                                        <div id="image-preview-container" class="image-preview">
                                            <span>Previsualizaci√≥n</span>
                                        </div>
                                        <span id="imagen-filename" class="text-xs text-gray-500 mt-1 block"></span>
                                        <input type="hidden" id="imagen-data-url">
                                    </div>
                                    <div class="space-y-4">
                                        <div>
                                            <label for="ovc-titulo"
                                                class="block text-sm font-medium text-gray-700"><span>üìÑ</span> T√≠tulo
                                                del OVC</label> <input type="text" id="ovc-titulo" name="ovc-titulo"
                                                required
                                                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500 sm:text-sm">
                                        </div>
                                        <div>
                                            <label for="ovc-descripcion"
                                                class="block text-sm font-medium text-gray-700"><span>üìÑ</span>
                                                Descripci√≥n</label> <textarea id="ovc-descripcion"
                                                name="ovc-descripcion" rows="4" required
                                                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500 sm:text-sm"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="border-b border-gray-200 pb-6">
                                <div class="flex justify-between items-center mb-3">
                                    <h2 class="text-xl font-semibold text-gray-700"><span>üë•</span> Autores</h2> <button
                                        type="button" id="add-autor"
                                        class="btn-add inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                        <span>‚ûï</span> A√±adir Autor </button>
                                </div>
                                <div id="autores-container" class="space-y-4">
                                    <div
                                        class="autor-item grid grid-cols-1 sm:grid-cols-5 gap-4 items-end p-4 border rounded-md bg-gray-50">
                                        <div>
                                            <label class="block text-xs font-medium text-gray-600"><span>üë§</span>
                                                Nombre</label> <input type="text" name="autor_nombre[]"
                                                placeholder="Nombre completo"
                                                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500 sm:text-sm">
                                        </div>
                                        <div>
                                            <label class="block text-xs font-medium text-gray-600"><span>üíº</span>
                                                Rol</label> <input type="text" name="autor_rol[]"
                                                placeholder="Ej: Investigador"
                                                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500 sm:text-sm">
                                        </div>
                                        <div>
                                            <label class="block text-xs font-medium text-gray-600"><span>@</span>
                                                E-mail</label> <input type="email" name="autor_email[]"
                                                placeholder="correo@ejemplo.com"
                                                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500 sm:text-sm">
                                        </div>
                                        <div>
                                            <label class="block text-xs font-medium text-gray-600"><span>%</span>
                                                Participaci√≥n (%)</label> <input type="number"
                                                name="autor_participacion[]" placeholder="Ej: 50" min="0" max="100"
                                                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500 sm:text-sm">
                                        </div>
                                        <button type="button"
                                            class="btn-remove remove-item self-end inline-flex justify-center items-center px-3 py-1.5 border border-red-300 text-sm font-medium rounded-md shadow-sm text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                                            <span>üóëÔ∏è</span> </button>
                                    </div>
                                </div>
                            </div>
                            <div class="border-b border-gray-200 pb-6 grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">
                                <div>
                                    <div class="flex justify-between items-center mb-2">
                                        <h3 class="text-lg font-medium text-gray-700"><span>üè∑Ô∏è</span> Etiquetas</h3>
                                        <button type="button" id="add-etiqueta"
                                            class="btn-add inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                            <span>‚ûï</span> A√±adir </button>
                                    </div>
                                    <div id="etiquetas-container" class="space-y-2">
                                        <div class="etiqueta-item flex items-center gap-2">
                                            <input type="text" name="etiquetas[]" placeholder="Ej: Realidad Aumentada"
                                                class="block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500 sm:text-sm">
                                            <button type="button"
                                                class="btn-remove remove-item inline-flex justify-center items-center p-1 border border-red-300 text-xs font-medium rounded text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                                                <span>üóëÔ∏è</span> </button>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <h3 class="text-lg font-medium text-gray-700 mb-2"><span>‚òëÔ∏è</span> Asignaturas</h3>
                                    <div class="space-y-2">
                                        <div class="flex items-center">
                                            <input id="asig-lab" name="asignaturas[]" type="checkbox"
                                                value="Laboratorio de convergencia"
                                                class="h-4 w-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500">
                                            <label for="asig-lab" class="ml-2 block text-sm text-gray-900">Laboratorio
                                                de convergencia</label>
                                        </div>
                                        <div class="flex items-center">
                                            <input id="asig-cod" name="asignaturas[]" type="checkbox"
                                                value="C√≥digos y lenguajes"
                                                class="h-4 w-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500">
                                            <label for="asig-cod" class="ml-2 block text-sm text-gray-900">C√≥digos y
                                                lenguajes</label>
                                        </div>
                                        <div class="flex items-center">
                                            <input id="asig-hist" name="asignaturas[]" type="checkbox"
                                                value="Historia de las artes electr√≥nicas"
                                                class="h-4 w-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500">
                                            <label for="asig-hist" class="ml-2 block text-sm text-gray-900">Historia de
                                                las artes electr√≥nicas</label>
                                        </div>
                                        <div class="flex items-center">
                                            <input id="asig-mod" name="asignaturas[]" type="checkbox"
                                                value="Modelado 3D"
                                                class="h-4 w-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500">
                                            <label for="asig-mod" class="ml-2 block text-sm text-gray-900">Modelado
                                                3D</label>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <label for="ovc-semestre"
                                        class="block text-sm font-medium text-gray-700 mb-1"><span>üìÖ</span>
                                        A√±o-Semestre</label> <select id="ovc-semestre" name="ovc-semestre"
                                        class="mt-1 block w-full rounded-md border-gray-300 py-2 pl-3 pr-10 text-base focus:border-pink-500 focus:outline-none focus:ring-pink-500 sm:text-sm">
                                        <option>2025-2</option>
                                        <option selected>2025-1</option>
                                        <option>2024-2</option>
                                        <option>2024-1</option>
                                        <option>2023-2</option>
                                        <option>2023-1</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="ovc-licencia"
                                        class="block text-sm font-medium text-gray-700 mb-1"><span>¬©Ô∏è</span> Tipo de
                                        Licenciamiento</label> <select id="ovc-licencia" name="ovc-licencia"
                                        class="mt-1 block w-full rounded-md border-gray-300 py-2 pl-3 pr-10 text-base focus:border-pink-500 focus:outline-none focus:ring-pink-500 sm:text-sm">
                                        <option selected value="CC BY">Creative Commons Atribuci√≥n (CC BY)</option>
                                        <option value="CC BY-SA">Creative Commons Atribuci√≥n-CompartirIgual (CC BY-SA)
                                        </option>
                                        <option value="CC BY-NC">Creative Commons Atribuci√≥n-NoComercial (CC BY-NC)
                                        </option>
                                        <option value="CC BY-ND">Creative Commons Atribuci√≥n-SinDerivadas (CC BY-ND)
                                        </option>
                                        <option value="CC BY-NC-SA">Creative Commons
                                            Atribuci√≥n-NoComercial-CompartirIgual (CC BY-NC-SA)</option>
                                        <option value="CC BY-NC-ND">Creative Commons Atribuci√≥n-NoComercial-SinDerivadas
                                            (CC BY-NC-ND)</option>
                                        <option value="CC0">Creative Commons Dominio P√∫blico (CC0)</option>
                                        <option value="Proprietary">Propietario / Todos los derechos reservados</option>
                                    </select>
                                </div>
                            </div>
                            <div class="border-b border-gray-200 pb-6">
                                <div class="flex justify-between items-center mb-3">
                                    <h2 class="text-xl font-semibold text-gray-700"><span>üîó</span> Enlaces Externos
                                    </h2> <button type="button" id="add-enlace"
                                        class="btn-add inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                        <span>‚ûï</span> A√±adir Enlace </button>
                                </div>
                                <div id="enlaces-container" class="space-y-4">
                                    <div
                                        class="enlace-item grid grid-cols-1 sm:grid-cols-3 gap-4 items-end p-4 border rounded-md bg-gray-50">
                                        <div class="sm:col-span-1">
                                            <label class="block text-xs font-medium text-gray-600"><span>‚ÑπÔ∏è</span>
                                                Descripci√≥n</label> <input type="text" name="enlace_desc[]"
                                                placeholder="Ej: Repositorio GitHub"
                                                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500 sm:text-sm">
                                        </div>
                                        <div class="sm:col-span-1">
                                            <label class="block text-xs font-medium text-gray-600"><span>üîó</span>
                                                URL</label> <input type="url" name="enlace_url[]"
                                                placeholder="https://ejemplo.com"
                                                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500 sm:text-sm">
                                        </div>
                                        <button type="button"
                                            class="btn-remove remove-item self-end inline-flex justify-center items-center px-3 py-1.5 border border-red-300 text-sm font-medium rounded-md shadow-sm text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                                            <span>üóëÔ∏è</span> </button>
                                    </div>
                                </div>
                            </div>
                            <div class="border-b border-gray-200 pb-6">
                                <h2 class="text-xl font-semibold text-gray-700 mb-4"><span>üìé</span> Archivo Principal
                                </h2>
                                <div>
                                    <label for="ovc-archivo"
                                        class="block text-sm font-medium text-gray-700 mb-1"><span>‚òÅÔ∏è</span> Subir
                                        archivo del OVC</label> <input type="file" id="ovc-archivo" name="ovc-archivo"
                                        class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-pink-50 file:text-pink-700 hover:file:bg-pink-100 custom-file-input">
                                    <span id="archivo-filename" class="text-xs text-gray-500 mt-1 block"></span>
                                </div>
                            </div>
                            <div class="border-b border-gray-200 pb-6">
                                <div class="flex justify-between items-center mb-3">
                                    <h2 class="text-xl font-semibold text-gray-700"><span>‚ÜîÔ∏è</span> Relaciones con otros
                                        OVC</h2> <button type="button" id="add-relacion"
                                        class="btn-add inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                        <span>‚ûï</span> A√±adir Relaci√≥n </button>
                                </div>
                                <div id="relaciones-container" class="space-y-4">
                                    <div
                                        class="relacion-item grid grid-cols-1 sm:grid-cols-4 gap-4 items-end p-4 border rounded-md bg-gray-50">
                                        <div>
                                            <label class="block text-xs font-medium text-gray-600"><span>üîó</span> OVC
                                                Relacionado</label> <input type="text" name="relacion_ovc[]"
                                                placeholder="Buscar o seleccionar OVC..."
                                                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500 sm:text-sm">
                                        </div>
                                        <div>
                                            <label class="block text-xs font-medium text-gray-600"><span>üè∑Ô∏è</span>
                                                Etiqueta de Relaci√≥n</label> <input type="text"
                                                name="relacion_etiqueta[]" placeholder="Ej: Se basa en, Contin√∫a"
                                                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500 sm:text-sm">
                                        </div>
                                        <div>
                                            <label class="block text-xs font-medium text-gray-600"><span>‚ÜîÔ∏è</span>
                                                Direcci√≥n</label> <select name="relacion_direccion[]"
                                                class="mt-1 block w-full rounded-md border-gray-300 py-2 pl-3 pr-10 text-base focus:border-pink-500 focus:outline-none focus:ring-pink-500 sm:text-sm">
                                                <option value="saliente">Saliente (Este OVC -> Otro)</option>
                                                <option value="entrante">Entrante (Otro OVC -> Este)</option>
                                                <option value="bidireccional">Bidireccional</option>
                                            </select>
                                        </div>
                                        <button type="button"
                                            class="btn-remove remove-item self-end inline-flex justify-center items-center px-3 py-1.5 border border-red-300 text-sm font-medium rounded-md shadow-sm text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                                            <span>üóëÔ∏è</span> </button>
                                    </div>
                                </div>
                            </div>

                            <div class="flex justify-end pt-6">
                                <button type="submit" id="form-submit-button"
                                    class="inline-flex items-center justify-center py-2 px-6 border border-transparent shadow-sm text-base font-medium rounded-md text-white bg-pink-600 hover:bg-pink-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500">
                                    <span class="mr-2">üíæ</span><span id="form-submit-button-text">Guardar OVC</span>
                                </button>
                            </div>
                        </form>
                    </div>


                    <div id="rizoma-section" class="hidden flex flex-col flex-1 min-h-0 h-full"> 

                        <div class="flex justify-end mb-4">

                            <div class="flex items-center space-x-4">
                                <button id="rizoma-create-ovc-btn" onclick="window.showSection('crear')"
                                    class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-pink-600 hover:bg-pink-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500">
                                    <span class="mr-2">‚ûï</span> Crear OVC
                                </button>
                                <div class="relative">
                                    <span class="search-icon">üîç</span>
                                    <input type="text" placeholder="Buscar..." id="rizoma-search-input"
                                        class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent">
                                </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-lg shadow flex-1 flex flex-col text-gray-500 min-h-0 h-full p-4">

                            <div class="flex-1 min-h-0">
                                <svg id="rizoma-graph" class="w-full h-full border border-gray-200 rounded"></svg>
                            </div>
                        </div>
                    </div>

                    <!-- Placeholder for Kanban Board eliminado para evitar duplicidad de IDs -->

                </div>

        </div>


        </main>

    </div>

    </div>

    <div id="confirmation-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden"
        aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div id="modal-overlay" class="absolute inset-0 bg-gray-600 bg-opacity-75 modal-overlay"></div>
        <div class="modal-content bg-white rounded-lg shadow-xl overflow-hidden transform sm:max-w-md sm:w-full mx-4">
            <div class="px-6 py-4">
                <div class="flex justify-between items-center">
                    <h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title"><span>‚úÖ</span> Confirmaci√≥n
                    </h3> <button id="modal-close-button-x" type="button"
                        class="text-gray-400 hover:text-gray-600 text-2xl">
                        <span>‚ùå</span> </button>
                </div>
                <div class="mt-4 text-center">
                    <span class="text-5xl mb-3 inline-block">‚úÖ</span>
                    <p class="text-lg text-gray-700" id="confirmation-modal-text">
                        ¬°El OVC se ha guardado correctamente!
                    </p>
                </div>
            </div>
            <div class="bg-gray-50 px-6 py-3 text-right">
                <button id="modal-close-button-ok" type="button"
                    class="inline-flex items-center justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-pink-600 text-base font-medium text-white hover:bg-pink-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 sm:text-sm">
                    Aceptar
                </button>
            </div>
        </div>
    </div>

    <div id="delete-confirm-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden"
        aria-labelledby="delete-modal-title" role="dialog" aria-modal="true">
        <div id="delete-modal-overlay" class="absolute inset-0 bg-gray-800 bg-opacity-60 modal-overlay"></div>
        <div class="modal-content bg-white rounded-lg shadow-xl overflow-hidden transform sm:max-w-lg sm:w-full mx-4">
            <div class="px-6 py-5">
                <div class="flex items-start">
                    <div
                        class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10">
                        <span class="text-red-600 text-xl">‚ö†Ô∏è</span>
                    </div>
                    <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">
                        <h3 class="text-lg leading-6 font-medium text-gray-900" id="delete-modal-title">
                            Confirmar Eliminaci√≥n
                        </h3>
                        <div class="mt-2">
                            <p class="text-sm text-gray-600">
                                ¬øEst√°s seguro de que quieres eliminar este OVC? Esta acci√≥n no se puede deshacer.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="bg-gray-100 px-6 py-4 sm:flex sm:flex-row-reverse">
                <button id="delete-confirm-button" type="button"
                    class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm">
                    Eliminar
                </button>
                <button id="delete-cancel-button" type="button"
                    class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm">
                    Cancelar
                </button>
            </div>
        </div>
    </div>

    <!-- Modal para el foro -->
    <div id="forum-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 hidden transition-opacity duration-300"
        aria-labelledby="forum-modal-title" role="dialog" aria-modal="true">
        <div class="relative bg-white rounded-lg shadow-xl w-11/12 max-w-6xl h-5/6 flex flex-col">
            <div class="flex justify-between items-center p-4 border-b">
                <h3 id="forum-modal-title" class="text-xl font-semibold">Foro de Discusi√≥n</h3>
                <button id="close-forum-modal" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div class="flex-1 overflow-hidden">
                <iframe id="forum-iframe" class="w-full h-full border-0" frameborder="0" allowfullscreen></iframe>
            </div>
        </div>
    </div>

    <div id="ovc-summary-modal"
        class="fixed inset-0 z-40 flex items-center justify-center bg-black bg-opacity-50 hidden transition-opacity duration-300"
        aria-labelledby="ovc-summary-modal-title" role="dialog" aria-modal="true">
        <div id="ovc-summary-modal-overlay" class="absolute inset-0 bg-gray-600 bg-opacity-75"></div>
        <div class="modal-content bg-white rounded-lg shadow-xl overflow-hidden transform sm:max-w-lg sm:w-full mx-4">
            <div class="px-6 py-4">
                <div class="flex justify-between items-center">
                    <h3 class="text-lg leading-6 font-medium text-gray-900" id="ovc-summary-modal-title"><span></span>
                    </h3>
                    <button id="ovc-summary-modal-close" type="button"
                        class="text-gray-400 hover:text-gray-600 text-2xl">
                    </button>
                </div>
                <div class="mt-4">
                    <div id="ovc-summary-modal-content" class="flex flex-col space-y-4 items-start">
                        <!-- Aqu√≠ se llenar√° el contenido din√°micamente -->
                        <div class="flex-1">
                            <h4 class="text-md font-semibold text-gray-700">Detalles</h4>
                            <p class="text-sm text-gray-600">Aqu√≠ se mostrar√°n los detalles principales del OVC.</p>
                        </div>
                        <div class="flex-1">
                            <h4 class="text-md font-semibold text-gray-700">Autores</h4>
                            <ul class="list-disc list-inside text-sm text-gray-600">
                                <li>Autor 1</li>
                                <li>Autor 2</li>
                            </ul>
                        </div>
                        <div class="flex-1">
                            <h4 class="text-md font-semibold text-gray-700">Etiquetas</h4>
                            <span
                                class="inline-block bg-gray-200 text-gray-700 text-xs font-medium px-2 py-1 rounded">Etiqueta
                                1</span>
                            <span
                                class="inline-block bg-gray-200 text-gray-700 text-xs font-medium px-2 py-1 rounded">Etiqueta
                                2</span>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-50 px-6 py-3 text-right">
                    <button id="ovc-summary-modal-ok" type="button"
                        class="inline-flex items-center justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-pink-600 text-base font-medium text-white hover:bg-pink-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 sm:text-sm">
                        Cerrar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Advanced Search Modal -->
    <div id="advanced-search-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden" aria-labelledby="advanced-search-modal-title" role="dialog" aria-modal="true">
        <div id="advanced-search-modal-overlay" class="absolute inset-0 bg-gray-800 bg-opacity-60 modal-overlay"></div>
        <div class="modal-content bg-white rounded-lg shadow-xl overflow-hidden transform sm:max-w-lg sm:w-full mx-4">
            <div class="px-6 py-4">
                <div class="flex justify-between items-center">
                    <h3 class="text-lg leading-6 font-medium text-gray-900" id="advanced-search-modal-title">
                        <span>‚öôÔ∏è</span> B√∫squeda Avanzada
                    </h3>
                    <button id="advanced-search-modal-close-x" type="button" class="text-gray-400 hover:text-gray-600 text-2xl">
                        <span>‚ùå</span>
                    </button>
                </div>
                <div class="mt-4 space-y-4">
                    <!-- Campo para B√∫squeda Descriptiva (IA) -->
                    <div>
                        <label for="ai-search-prompt" class="block text-sm font-medium text-gray-700">B√∫squeda Descriptiva (IA)</label>
                        <textarea id="ai-search-prompt" name="ai-search-prompt" rows="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500 sm:text-sm" placeholder="Describa qu√© OVC busca..."></textarea>
                    </div>

                    <!-- Filtros por Campos Espec√≠ficos -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Filtrar por Campos:</label>
                        <div class="mt-2 space-y-2">
                            <div class="flex items-center">
                                <input id="filter-titulo" name="filter-fields" type="checkbox" value="titulo" class="h-4 w-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500">
                                <label for="filter-titulo" class="ml-2 block text-sm text-gray-900">T√≠tulo</label>
                            </div>
                            <div class="flex items-center">
                                <input id="filter-descripcion" name="filter-fields" type="checkbox" value="descripcion" class="h-4 w-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500">
                                <label for="filter-descripcion" class="ml-2 block text-sm text-gray-900">Descripci√≥n</label>
                            </div>
                            <div class="flex items-center">
                                <input id="filter-palabras-clave" name="filter-fields" type="checkbox" value="palabrasClave" class="h-4 w-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500">
                                <label for="filter-palabras-clave" class="ml-2 block text-sm text-gray-900">Palabras Clave</label>
                            </div>
                        </div>
                    </div>

                    <!-- Checkbox para Fuzzy Search -->
                    <div class="flex items-center">
                        <input id="fuzzy-search-checkbox" name="fuzzy-search" type="checkbox" class="h-4 w-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500">
                        <label for="fuzzy-search-checkbox" class="ml-2 block text-sm text-gray-900">Incluir resultados aproximados (Fuzzy Search)</label>
                    </div>
                </div>
            </div>
            <div class="bg-gray-50 px-6 py-3 sm:flex sm:flex-row-reverse">
                <button id="apply-advanced-search-button" type="button" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-pink-600 text-base font-medium text-white hover:bg-pink-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 sm:ml-3 sm:w-auto sm:text-sm">
                    Aplicar B√∫squeda Avanzada
                </button>
                <button id="advanced-search-modal-close-cancel" type="button" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                    Cancelar
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de B√∫squeda Avanzada -->
    <div id="advanced-search-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden"
        aria-labelledby="advanced-search-modal-title" role="dialog" aria-modal="true">
        <div id="advanced-search-modal-overlay" class="absolute inset-0 bg-gray-800 bg-opacity-60"></div>
        <div class="modal-content bg-white rounded-lg shadow-xl overflow-hidden transform sm:max-w-2xl sm:w-full mx-4">
            <div class="px-6 py-4">
                <div class="flex justify-between items-center">
                    <h3 class="text-lg leading-6 font-medium text-gray-900" id="advanced-search-modal-title">
                        <span>üîç</span> B√∫squeda Avanzada
                    </h3>
                    <button id="advanced-search-modal-close-x" type="button" class="text-gray-400 hover:text-gray-600 text-2xl">
                        <span>‚ùå</span>
                    </button>
                </div>
                <div class="mt-4">
                    <div class="mb-4">
                        <label for="ai-search-prompt" class="block text-sm font-medium text-gray-700 mb-1">
                            B√∫squeda con IA (opcional)
                        </label>
                        <textarea id="ai-search-prompt" rows="3"
                            class="shadow-sm focus:ring-pink-500 focus:border-pink-500 mt-1 block w-full sm:text-sm border border-gray-300 rounded-md p-2"
                            placeholder="Ej: Muestra solo los OVC relacionados con programaci√≥n que tengan videos..."></textarea>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            Opciones de b√∫squeda:
                        </label>
                        <div class="flex items-center mb-2">
                            <input id="fuzzy-search-checkbox" type="checkbox" class="h-4 w-4 text-pink-600 focus:ring-pink-500 border-gray-300 rounded">
                            <label for="fuzzy-search-checkbox" class="ml-2 block text-sm text-gray-700">
                                B√∫squeda difusa (encontrar resultados similares)
                            </label>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            Buscar en campos espec√≠ficos:
                        </label>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-2">
                            <div class="flex items-center">
                                <input id="field-title" type="checkbox" name="filter-fields" value="titulo" class="h-4 w-4 text-pink-600 focus:ring-pink-500 border-gray-300 rounded" checked>
                                <label for="field-title" class="ml-2 block text-sm text-gray-700">T√≠tulo</label>
                            </div>
                            <div class="flex items-center">
                                <input id="field-desc" type="checkbox" name="filter-fields" value="descripcion" class="h-4 w-4 text-pink-600 focus:ring-pink-500 border-gray-300 rounded" checked>
                                <label for="field-desc" class="ml-2 block text-sm text-gray-700">Descripci√≥n</label>
                            </div>
                            <div class="flex items-center">
                                <input id="field-autor" type="checkbox" name="filter-fields" value="autores.nombre" class="h-4 w-4 text-pink-600 focus:ring-pink-500 border-gray-300 rounded" checked>
                                <label for="field-autor" class="ml-2 block text-sm text-gray-700">Autor</label>
                            </div>
                            <div class="flex items-center">
                                <input id="field-tags" type="checkbox" name="filter-fields" value="etiquetas" class="h-4 w-4 text-pink-600 focus:ring-pink-500 border-gray-300 rounded" checked>
                                <label for="field-tags" class="ml-2 block text-sm text-gray-700">Etiquetas</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="bg-gray-50 px-6 py-3 text-right">
                <button id="advanced-search-cancel" type="button"
                    class="inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                    Cancelar
                </button>
                <button id="apply-advanced-search-button" type="button"
                    class="inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-pink-600 text-base font-medium text-white hover:bg-pink-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 sm:ml-3 sm:w-auto sm:text-sm">
                    Aplicar B√∫squeda
                </button>
            </div>
        </div>
    </div>

    
    <script src="../js/modalHandlers.js" defer></script>
    <script src="../js/indexPageLogic.js" defer></script>
</body>

</html>
